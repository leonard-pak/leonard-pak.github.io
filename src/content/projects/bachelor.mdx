---
title:
  Система дистанционного управления мобильным РТК через виртуальный интерфейс
  с эффектом присутствия
pubDate: '2021-06-20'
publication_links:
  - name: Презентация
    url: https://docs.google.com/presentation/d/e/2PACX-1vSMJjPXGfuXhnBRhD79S47wfGVN6TLl471Otd5-o3yDiLxJREeXD_Q0SeZZT7pP5_sa-SjAdJh1OSrM/pub?start=false&loop=false&delayms=3000
    icon: slideshow
  - name: Демо
    url: https://youtu.be/dH4iEgrxI6c
    icon: video
  - name: Статья
    url: https://doi.org/10.1063/5.0151646
    icon: file-pdf
  - name: Код Unity
    url: https://github.com/leonard-pak/StereoVR_RobotControl
    icon: github-logo
tags:
  - robotics
  - science
heroImage: /projects/bachelor/hero.webp
description:
  'Выпускная кваливикационная работа бакалавра, целью которой была разработка
  системы управления мобильным робототехническим комплексом с использованием
  технологии виртуальной реальности.'
---
import { Image } from "astro:assets";


## Аннотация

В данной работе представлено описание возможной реализации
дистанционного управления мобильным робототехнического комплекса с
использованием технологии виртуальной реальности. Для увеличения
возможностей оператора был разработан **макет из стереопары RGB камер**,
установленных на двухосевой подвес, а в качестве устройства для погружения в
виртуальную среду был использован **шлем виртуальной реальности HTC Vive Pro**.
Сама виртуальная среда воспроизводилась с помощью среды разработки **Unity3D**.
Таким образом оператор получал видеоизображение окружающей среды со
стереоскопическим эффектом, а двухосевой подвес повторял движения головы
оператора для большего **эффекта телеприсутствия**.

## Система управления

Выбор двигателя был осуществлен на основе проведения ряда опытов, по результатам
которых были получены рабочие частоты и амплитудные значения скорости и ускорения
в двух плоскостях: вертикальном и горизонтальном. Синтез корректирующего устройства
проведен для привода горизонтального вращения частотным методом. Раработка платы
управления проводилсь с учетом установки её в непосредственной близости к
исполнительному двигателю. Однако для разработки макета использовались уже
готовые привода с аналогичными характеристиками.

## Двухосевой подвес

В качестве стереокамеры используется модуль стереозрения TrackingCam
от компании «Прикладная робототехника». В качестве приводов используются
сервоприводы Dynamixel MX–28T и MX-64T. Детали распечатаны на 3D принтере.

<figure class="flex flex-col items-center">
  <div class="not-prose carousel rounded-lg w-10/12">
    <div class="carousel-item w-1/2">
      <Image width={600} height={600} src="/projects/bachelor/gimbal-3D.webp" format="webp" alt="3D модель подвеса"/>
    </div>
    <div class="carousel-item w-1/2">
      <Image width={600} height={600} src="/projects/bachelor/gimbal-real.webp" format="webp" alt="Подвес в сборе"/>
    </div>
  </div>
  <figcaption>3D модель и макет двухосевого подвеса.</figcaption>
</figure>


## Обработка изображений

Вся экосистема проекта разработа с помощью ROS1. Для получения данных с камер
запускается нода, которая эмулирует работу alive-запросов, по которым камера
отдает кадры с камер, а полученные кадры отправлет топики. Стереопара калибруется
средствами ROS, а обработка изображений с помощью библиотеки OpenCV.

<figure class="flex flex-col items-center">
  <Image width={600} height={236} src="/projects/bachelor/depth.webp" format="webp" alt="Вид с левой камеры и карта глубины"/>
  <figcaption>Вид с левой камеры и карта глубины.</figcaption>
</figure>

## Unity3D

Для связи C#-скриптов с топиками ROS в данном решении используется библиотека
[ROS#](https://github.com/siemens/ros-sharp). Благодаря переписаному шейдеру
получилось рендерить текстуру объекта для каждого глаза по отдельности. От шлема
в приводы по UART передавались команды для синхронизации поворота головы оператора
и подвеса. В интерфейсе допольнительно демонстрировалась карта глубины.

<figure class="flex flex-col items-center">
  <Image width={2214} height={904} src="/projects/bachelor/stereo.webp" format="webp" alt="Cтереоскопический вид в VR шлеме"/>
  <figcaption>Cтереоскопический вид в VR шлеме.</figcaption>
</figure>

## Итог

По итогу получилось увеличить возможности оператора, предоставляя ему не только
реконфигурируемы интерфейс управления за счет программного кода, но и увеличить
информативность операторы за счет использования новых способов отображения данных.
